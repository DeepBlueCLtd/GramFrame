<!DOCTYPE html>
<html>
<head>
    <title>Verify Y-Axis Inversion</title>
    <style>
        body { margin: 20px; font-family: Arial, sans-serif; }
        .container { max-width: 1000px; margin: 0 auto; }
        .test-svg { border: 2px solid #333; background: #f9f9f9; margin: 20px 0; }
        .info { background: #e8f4f8; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .coord-display { font-family: monospace; background: #2a2a2a; color: #00ff00; padding: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Y-Axis Inversion Verification</h1>
        
        <div class="info">
            <h3>Expected Behavior:</h3>
            <ul>
                <li>Y=100 should be at the BOTTOM (lower frequencies)</li>
                <li>Y=500 should be at the TOP (higher frequencies)</li>
                <li>Mouse at top-left corner should show ~(100, 500)</li>
                <li>Mouse at bottom-right corner should show ~(900, 100)</li>
            </ul>
        </div>
        
        <div class="coord-display" id="coords">Move mouse over SVG to see coordinates</div>
        
        <svg class="test-svg" width="800" height="400" viewBox="100 100 800 400">
            <!-- Grid background -->
            <defs>
                <pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse">
                    <path d="M 100 0 L 0 0 0 100" fill="none" stroke="#ddd" stroke-width="1"/>
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#grid)" />
            
            <!-- Inverted coordinate group -->
            <g transform="scale(1, -1) translate(0, -600)">
                <!-- Data area border -->
                <rect x="100" y="100" width="800" height="400" fill="none" stroke="#666" stroke-width="2"/>
                
                <!-- Test markers at key positions -->
                <g id="test-markers">
                    <!-- Bottom-left (100, 100) -->
                    <circle cx="100" cy="100" r="5" fill="red"/>
                    <text x="120" y="100" fill="red" font-size="14" transform="translate(120, 100) scale(1, -1) translate(-120, -100)">100,100</text>
                    
                    <!-- Top-left (100, 500) -->
                    <circle cx="100" cy="500" r="5" fill="green"/>
                    <text x="120" y="500" fill="green" font-size="14" transform="translate(120, 500) scale(1, -1) translate(-120, -500)">100,500</text>
                    
                    <!-- Bottom-right (900, 100) -->
                    <circle cx="900" cy="100" r="5" fill="blue"/>
                    <text x="880" y="100" fill="blue" font-size="14" text-anchor="end" transform="translate(880, 100) scale(1, -1) translate(-880, -100)">900,100</text>
                    
                    <!-- Top-right (900, 500) -->
                    <circle cx="900" cy="500" r="5" fill="purple"/>
                    <text x="880" y="500" fill="purple" font-size="14" text-anchor="end" transform="translate(880, 500) scale(1, -1) translate(-880, -500)">900,500</text>
                    
                    <!-- Center (500, 300) -->
                    <circle cx="500" cy="300" r="5" fill="orange"/>
                    <text x="500" y="320" fill="orange" font-size="14" text-anchor="middle" transform="translate(500, 320) scale(1, -1) translate(-500, -320)">500,300</text>
                </g>
                
                <!-- Test image -->
                <image href="../sample/test-image-offset-axes.png" x="100" y="100" width="800" height="400" opacity="0.7"/>
            </g>
        </svg>
        
        <div class="info">
            <h3>Verification Steps:</h3>
            <ol>
                <li>Red dot (100,100) should be at bottom-left</li>
                <li>Green dot (100,500) should be at top-left</li>
                <li>Blue dot (900,100) should be at bottom-right</li>
                <li>Purple dot (900,500) should be at top-right</li>
                <li>Orange dot (500,300) should be at center</li>
                <li>Image grid lines should align with coordinate markers</li>
            </ol>
        </div>
    </div>
    
    <script type="module">
        import { CoordinateSystem } from './coordinates.js';
        
        const svg = document.querySelector('.test-svg');
        const coordDisplay = document.getElementById('coords');
        
        // Initialize coordinate system
        const coordSystem = new CoordinateSystem({
            minX: 100, maxX: 900,
            minY: 100, maxY: 500
        });
        
        svg.addEventListener('mousemove', (e) => {
            const rect = svg.getBoundingClientRect();
            const screenX = e.clientX - rect.left;
            const screenY = e.clientY - rect.top;
            
            const svgCoords = coordSystem.screenToSVG(screenX, screenY);
            const dataCoords = coordSystem.svgToData(svgCoords.x, svgCoords.y);
            
            coordDisplay.innerHTML = `
                Screen: (${screenX.toFixed(0)}, ${screenY.toFixed(0)}) | 
                SVG: (${svgCoords.x.toFixed(1)}, ${svgCoords.y.toFixed(1)}) | 
                Data: (${dataCoords.x.toFixed(1)}, ${dataCoords.y.toFixed(1)})
            `;
        });
    </script>
</body>
</html>